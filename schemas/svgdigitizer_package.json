{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "allOf": [
    {
      "$ref": "https://datapackage.org/profiles/2.0/datapackage.json"
    }
  ],
  "definitions": {
    "Field": {
      "description": "Description of a data field (column) compatible with frictionless table-schema and extended with echemdb-specific properties for physical quantities.",
      "properties": {
        "description": {
          "description": "A description of that field.",
          "example": "The potential measured between the working electrode and reference electrode.",
          "type": "string"
        },
        "dimension": {
          "description": "Physical dimension of the field (e.g., 'time', 'potential', 'current density').",
          "example": "potential",
          "type": "string"
        },
        "format": {
          "description": "Format specification for the field type (default, email, uri, binary, uuid for strings; default for numbers).",
          "example": "default",
          "type": "string"
        },
        "name": {
          "description": "Name of the data field. Use single letters for specific systems. Otherwise use descriptive names like 't_rel', 'E_WE', or 'j_WE'.",
          "example": "E_WE",
          "type": "string"
        },
        "orientation": {
          "description": "Axis orientation in plots (horizontal for x-axis, vertical for y-axis).",
          "enum": [
            "horizontal",
            "vertical"
          ],
          "example": "horizontal",
          "type": "string"
        },
        "reference": {
          "description": "Reference electrode or reference point for this measurement (electrochemistry-specific).",
          "example": "RHE",
          "type": "string"
        },
        "title": {
          "description": "A human-readable title for this field.",
          "type": "string"
        },
        "type": {
          "description": "Data type of the field (string, number, integer, boolean, object, array, date, time, datetime, year, duration, geopoint, geojson, any).",
          "example": "number",
          "type": "string"
        },
        "unit": {
          "description": "Unit of measurement for this field (SI or conventional electrochemical units), following astropy's string unit notation.",
          "example": "V",
          "type": "string"
        }
      },
      "required": [
        "name"
      ],
      "title": "Field",
      "type": "object"
    },
    "ScanRate": {
      "additionalProperties": false,
      "description": "The rate at which the data has been recorded.",
      "example": "10 mV / s",
      "properties": {
        "calculation": {
          "description": "Method or formula used to calculate this quantity.",
          "example": "Obtained by multiplying U and I",
          "type": "string"
        },
        "comment": {
          "description": "Additional notes about the measurement or quantity.",
          "example": "Measured at room temperature",
          "type": "string"
        },
        "uncertainty": {
          "$ref": "#/definitions/Uncertainty"
        },
        "unit": {
          "$ref": "#/definitions/Unit"
        },
        "value": {
          "$ref": "#/definitions/Value"
        }
      },
      "title": "scanRate",
      "type": "object"
    },
    "SvgdigitizerResource": {
      "description": "A resource created by svgdigitizer with minimal echemdb metadata.",
      "properties": {
        "metadata": {
          "description": "Metadata container for the digitized resource.",
          "properties": {
            "echemdb": {
              "description": "Simplified echemdb metadata for digitized data.",
              "properties": {
                "additionalProperties": true,
                "experimental": {
                  "description": "Experimental tags or keywords.",
                  "figureDescription": {
                    "additionalProperties": false,
                    "description": "Description of the data to a figure or plot including data type and measurement details.",
                    "properties": {
                      "comment": {
                        "description": "Additional notes about the figure or data.",
                        "example": "Data below 0 V was cut off by the x-axis.",
                        "type": "string"
                      },
                      "fields": {
                        "description": "Description of data fields/columns in the figure.",
                        "items": {
                          "$ref": "#/definitions/Field"
                        },
                        "type": "array"
                      },
                      "measurementType": {
                        "description": "Acronym type for the measurement performed, such as CV; EIS, XPS, etc.",
                        "example": "CV",
                        "type": "string"
                      },
                      "scanRate": {
                        "$ref": "#/definitions/ScanRate",
                        "description": "Scan rate used in the measurement."
                      },
                      "simultaneousMeasurements": {
                        "description": "Other measurements performed simultaneously, such as ring current, IR, Raman, ICP-MS.",
                        "items": {
                          "type": "string"
                        },
                        "type": "array"
                      },
                      "type": {
                        "anyOf": [
                          {
                            "const": "digitized",
                            "description": "Data extracted from a figure using software (e.g., svgdigitizer)."
                          },
                          {
                            "const": "raw",
                            "description": "Original data as recorded by the instrument."
                          },
                          {
                            "const": "simulated",
                            "description": "Data generated by simulation software."
                          },
                          {
                            "const": "processed",
                            "description": "Data generated by processing raw or simulated data."
                          }
                        ],
                        "description": "Source or origin of the data, such as digitized, raw, simulated, or processed.",
                        "example": "raw",
                        "type": "string"
                      }
                    },
                    "required": [
                      "type"
                    ],
                    "title": "figureDescription",
                    "type": "object"
                  },
                  "properties": {
                    "tags": {
                      "description": "List of tags describing the experiment or measurement.",
                      "example": [
                        "CV",
                        "ORR",
                        "alkaline"
                      ],
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    }
                  },
                  "source": {
                    "description": "Source publication information for digitized data.",
                    "properties": {
                      "citationKey": {
                        "description": "BibTeX citation key for the source following `<FirstAuthorName>_<Year>_<FirstWordOfTitle>_<FirstPageNumber>` format.",
                        "example": "doe_2024_electrochemistry_543",
                        "type": "string"
                      },
                      "curve": {
                        "description": "Specific curve identifier within the figure.",
                        "example": "blue",
                        "type": "string"
                      },
                      "figure": {
                        "description": "Figure identifier in the source publication.",
                        "example": "2a",
                        "type": "string"
                      },
                      "techniques": {
                        "contains": {
                          "type": "string"
                        },
                        "description": "Techniques used in the source data.",
                        "example": [
                          "CV",
                          "EIS",
                          "XPS"
                        ],
                        "type": "array"
                      },
                      "url": {
                        "default": "https://",
                        "description": "URL or DOI of the source publication.",
                        "example": "https://example.org",
                        "format": "uri",
                        "pattern": "^https?://.*$",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  },
                  "type": "object"
                }
              },
              "required": [
                "figureDescription"
              ],
              "type": "object"
            }
          },
          "required": [
            "echemdb"
          ],
          "type": "object"
        }
      },
      "type": "object"
    },
    "Uncertainty": {
      "additionalProperties": false,
      "description": "Uncertainty information for a measured quantity.",
      "minProperties": 1,
      "properties": {
        "comment": {
          "description": "Additional information about the uncertainty estimation.",
          "example": "Standard deviation from 3 replicate measurements",
          "type": "string"
        },
        "negativeValue": {
          "description": "Lower bound (-) for asymmetric uncertainties.",
          "example": 0.01,
          "type": "number"
        },
        "positiveValue": {
          "description": "Upper bound (+) for asymmetric uncertainties.",
          "example": 0.02,
          "type": "number"
        },
        "type": {
          "description": "Type of uncertainty (absolute or relative).",
          "enum": [
            "absolute",
            "relative"
          ],
          "example": "absolute",
          "type": "string"
        },
        "unit": {
          "description": "Unit of the uncertainty value.",
          "example": "mol / l",
          "type": "string"
        },
        "value": {
          "description": "Symmetric uncertainty value (Â±).",
          "example": 0.01,
          "type": "number"
        }
      },
      "title": "Uncertainty",
      "type": "object"
    },
    "Unit": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        },
        {
          "type": "string"
        }
      ],
      "description": "Unit of measurement as a string (e.g., 'mol / l', 'V', 'mA / cm2').",
      "example": "mol / l",
      "title": "Unit"
    },
    "Value": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        },
        {
          "type": "string"
        }
      ],
      "description": "Numerical value (can be a number, string, or null).",
      "example": 0.5,
      "title": "Value"
    }
  },
  "description": "Data package schema for svgdigitizer output following the Frictionless Data Package specification with simplified echemdb metadata.",
  "properties": {
    "resources": {
      "items": {
        "allOf": [
          {
            "$ref": "https://datapackage.org/profiles/2.0/dataresource.json"
          },
          {
            "$ref": "#/definitions/SvgdigitizerResource"
          }
        ]
      },
      "type": "array"
    }
  },
  "title": "svgdigitizer Data Package Profile",
  "type": "object"
}
